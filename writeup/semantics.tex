% step_do_1
\newcommand{\dostepa}
{\judgment{}
  {\(\defsstate{\expr;} \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\kdo{\cont}}\)}
}

% step_do_2
\newcommand{\dostepb}
{\judgment{}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kdo{\cont}} \longrightarrow
    \defsstate{\sskip}\)}
}
`
% step_seq
\newcommand{\seqstep}
{\judgment{}
  {\(\defsstate{\stmt_1;\stmt_2} \longrightarrow
    \sstate{\PCT}{\mem}{\stmt_1;}{\kseq{\stmt_2}{\cont}}\)}
}

% step_skip_seq
\newcommand{\seqskipstep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\sskip}{\kseq{\stmt}{\cont}} \longrightarrow
    \defsstate{\stmt}\)}
}

% step_continue_seq
\newcommand{\seqcontinuestep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\scontinue}{\kseq{\stmt}{\cont}} \longrightarrow
    \sstate{\PCT}{\mem}{\scontinue}{\cont}\)}}

% step_break_seq
\newcommand{\seqbreakstep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\sbreak}{\kseq{\stmt}{\cont}} \longrightarrow
    \sstate{\PCT}{\mem}{\sbreak}{\cont}\)}
}

% step_ifthenelse_1
\newcommand{\ifstepa}
{\judgment{\(\stmt=\sifthenelse{\expr}{\stmt_1}{\stmt_2}{L}\)}
  {\(\defsstate{\stmt} \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\kif{\stmt_1}{\stmt_2}{L}{\cont}}\)}
}

% step_ifthenelse_2
\newcommand{\ifstepb}
{\judgmenttwo
  {\(\stmt' =
    \begin{cases}
      \stmt_1 & \textnormal{if } \mathit{boolof}(v) = \mathbf{t} \\
      \stmt_2 & \textnormal{if } \mathit{boolof}(v) = \mathbf{f} \\
    \end{cases}\)}
  {\(\trule{\splittres}{\splitt}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kif{\stmt_1}{\stmt_2}{L}{\cont}}
    \longrightarrow
    \sstate{\PCT'}{\mem}{\stmt'}{\cont}\)}
}

% step_ifthen_else_2_fail

% step_while
\newcommand{\whilestep}
{\judgment{\(\stmt=\swhile{\expr}{\stmt'}{L}\)}
  {\(\defsstate{\stmt} \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\kwhiletest{\expr}{\stmt'}{L}{\cont}}\)}
}

% step_while_false
\newcommand{\whilefalsestep}
{\judgmenttwo
  {\(\mathit{boolof}(v) = \mathbf{f}\)}
  {\(\cont = \kwhiletest{\expr}{\stmt}{L}{\cont'}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\cont}
    \longrightarrow
    \sstate{\PCT'}{\mem}{\sskip}{\cont'}\)}
}

% step_while_true
\newcommand{\whiletruestep}
{\judgmentthree
  {\(\mathit{boolof}(v) = \mathbf{t}\)}
  {\(\cont_1 = \kwhiletest{\expr}{\stmt}{L}{\cont}\)}
  {\(\cont_2 = \kwhileloop{\expr}{\stmt}{L}{\cont}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\cont_1}
    \longrightarrow
    \sstate{\PCT'}{\mem}{\stmt}{\cont_2}\)}
}

% step_skip_or_continue_while
\newcommand{\whileskipcontinuestep}
{\judgmenttwo{\(\stmt = \sskip \lor \stmt = \scontinue\)}
  {\(\cont = \kwhileloop{\expr}{\stmt}{L}{\cont'}\)}
  {\(\defsstate{\stmt} \longrightarrow
    \sstate{\PCT}{\mem}{\swhile{\expr}{\stmt}{L}}{\cont'}\)}}

% step_break_while
\newcommand{\whilebreakstep}
{\judgment{\(\cont = \kwhileloop{\expr}{\stmt}{L}{\cont'}\)}
  {\(\sstate{\PCT}{\mem}{\sbreak}{\cont} \longrightarrow
    \sstate{\PCT}{\mem}{\sskip}{\cont'}\)}}

% step_dowhile
\newcommand{\dowhilestep}
{\judgmenttwo{\(\stmt = \sdowhile{\expr}{\stmt}{L}\)}
  {\(\cont' = \kdowhileloop{\expr}{\stmt}{L}{\cont}\)}
  {\(\defsstate{\stmt} \longrightarrow
    \sstate{\PCT}{\mem}{\stmt}{\cont'}\)}
}

% step_skip_or_continue_dowhile
\newcommand{\dowhileskipcontinuestep}
{\judgmenttwo
  {\(\cont_1 = \kdowhileloop{\expr}{\stmt}{L}{\cont'}\)}
  {\(\cont_2 = \kdowhiletest{\expr}{\stmt}{L}{\cont}\)}
  {\(\sstate{\PCT}{\mem}{\stmt' = \sskip \lor \stmt' = \scontinue}{\cont_1} \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\cont_2}\)}}

% step_dowhile_false
\newcommand{\dowhilefalsestep}
{\judgmenttwo
  {\(\mathit{boolof}(v) = \mathbf{f}\)}
  {\(\cont = \kdowhiletest{\expr}{\stmt}{L}{\cont'}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\cont}
    \longrightarrow
    \sstate{\PCT'}{\mem}{\sskip}{\cont'}\)}
}

% step_dowhile_true
\newcommand{\dowhiletruestep}
{\judgmenttwo
  {\(\mathit{boolof}(v) = \mathbf{t}\)}
  {\(\cont = \kdowhiletest{\expr}{\stmt}{L}{\cont'}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\cont}
    \longrightarrow
    \sstate{\PCT'}{\mem}{\sdowhile{\expr}{\stmt}{L}}{\cont'}\)}
}

% step_break_dowhile
\newcommand{\dowhilebreakstep}
{\judgment{\(\cont = \kdowhileloop{\expr}{\stmt}{L}{\cont'}\)}
  {\(\sstate{\PCT}{\mem}{\sbreak}{\cont} \longrightarrow
    \sstate{\PCT}{\mem}{\sskip}{\cont'}\)}}

% step_for_start
\newcommand{\forinitstep}
{\judgmenttwo
  {\(\stmt = \sfor{\stmt_1}{\expr}{\stmt_2}{\stmt_3}{L}\)}
  {\(\stmt_1 \not = \sskip\)}
  {\(\defsstate{\stmt} \longrightarrow
  \sstate{\PCT}{\mem}{\stmt_1}{\kseq{\sfor{\sskip}{\expr}{\stmt_2}{\stmt_3}{L}}{\cont}}\)}
}

% step_for
\newcommand{\forstep}
{\judgment{\(\stmt = \sfor{\sskip}{\expr}{\stmt_2}{\stmt_3}{L}\)}
  {\(\defsstate{\stmt} \longrightarrow
  \estate{\PCT}{\mem}{\expr}{\kfor{\stmt}{\cont}}\)}
}

% step_for_false
\newcommand{\forfalsestep}
{\judgment{\(\mathit{boolof}(v) = \mathbf{f}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kfor{\stmt}{\cont}} \longrightarrow
    \sstate{\PCT}{\mem}{\sskip}{\cont}\)}
}

% step_for_true
\newcommand{\fortruestep}
{\judgmenttwo{\(\stmt = \sfor{\sskip}{\expr}{\stmt_2}{\stmt_3}{L}\)}
             {\(\mathit{boolof}(v) = \mathbf{t}\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kfor{\stmt}{\cont}} \longrightarrow
      \sstate{\PCT}{\mem}{\stmt_3}{\kfor{\stmt}{\cont}}\)}
}

% step_skip_or_continue
\newcommand{\forskiporcontinuestep}
{\judgmenttwo{\(\stmt = \sfor{\sskip}{\expr}{\stmt_1}{\stmt_2}{L}\)}
  {\(\stmt = \sskip \lor \stmt = \scontinue\)}
  {\(\sstate{\PCT}{\mem}{\stmt}{\kfor{\stmt}{\cont}}
    \longrightarrow
    \sstate{\PCT}{\mem}{\stmt_1}{\kforpost{\sfor{\sskip}{\expr}{\stmt_1}{\stmt_2}{L}}{\cont}}\)}
}

% step_break_for3
\newcommand{\forbreakstep}
{\judgment{\(\stmt = \sfor{\sskip}{\expr}{\stmt_1}{\stmt_2}{L}\)}
  {\(\sstate{\PCT}{\mem}{\sbreak}{\kfor{\stmt}{\cont}}
    \longrightarrow
    \sstate{\PCT}{\mem}{\sskip}{\cont}\)}
}

% step_skip_for4
\newcommand{\forskippoststep}
{\judgment{\(\stmt = \sfor{\sskip}{\expr}{\stmt_1}{\stmt_2}{L}\)}
  {\(\sstate{\PCT}{\mem}{\sskip}{\kforpost{\stmt}{\cont}}
    \longrightarrow
    \defsstate{\stmt}\)}
}

% step_return_0
\newcommand{\retnovalstep}
{\judgment{\(\mathit{dealloc} ~ \mem ~ \PCT = (\PCT',\mem')\)}
  {\(\sstate{\PCT}{\mem}{\sreturn{}}{\cont}
    \longrightarrow
    \rstate{\PCT'}{\mem'}{\val{\vundef}{\deftag}}{\cont}\)}
}

% step_return_1
\newcommand{\retexprstep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\sreturn{\expr}}{\cont}
    \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\kreturn{\cont}}\)}
}

% step_return_2
\newcommand{\retvalstep}
{\judgment{\(\mathit{dealloc} ~ \mem ~ \PCT = (\PCT',\mem')\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kreturn{\cont}}
    \longrightarrow
    \rstate{\PCT}{\mem}{\val{v}{\vt}}{\cont}\)}
}

% step_skip_call
\newcommand{\skipreturnstep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\sskip}{\kcall{\cont}}
    \longrightarrow
    \rstate{\PCT}{\mem}{\val{\vundef}{\deftag}}{\cont}\)}
}
  
% step_switch
\newcommand{\switchstep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\sswitch{\expr}{\overline{(L,\stmt)}}}{\cont}
    \longrightarrow
    \estate{\PCT}{\mem}{\expr}{\kswitcha{\overline{(L,\stmt)}}{\cont}}\)}
}

% step_expr_switch
\newcommand{\switchvalstep}
{\judgment{\(\mathit{select} ~ v ~ \overline{(L,\stmt)} = \stmt\)}
  {\(\estate{\PCT}{\mem}{\val{v}{\vt}}{\kswitcha{\overline{(L,\stmt)}}{\cont}}
    \longrightarrow
    \sstate{\PCT}{\mem}{\stmt}{\kswitchb{\cont}}\)}
}
  
% step_skip_break_switch
\newcommand{\switchskiporbreakstep}
{\judgment{\(\stmt = \sbreak \lor \stmt = \sskip\)}
  {\(\sstate{\PCT}{\mem}{\stmt}{\kswitchb{\cont}}
    \longrightarrow
    \sstate{\PCT}{\mem}{\sskip}{\cont}\)}
}

% step_continue_switch
\newcommand{\switchcontinuestep}
{\judgment{}
  {\(\sstate{\PCT}{\mem}{\scontinue}{\kswitchb{\cont}}
    \longrightarrow
    \sstate{\PCT}{\mem}{\scontinue}{\cont}\)}
}

% step_label
\newcommand{\labelstep}
{\judgment
  {\(\labeltres \leftarrow \labelt\)}
  {\(\sstate{\PCT}{\mem}
    {L: \stmt}{\cont} \longrightarrow
    \sstate{\PCT'}{\mem}{\genv}{\lenv'}{\stmt}{\cont}\)}
}

% step_goto
\newcommand{\gotostep}
{\judgment{\(\mathit{findlabel}(L) = \slabel{L}{\stmt}\)}
  {\(\sstatefun{f}{\PCT}{\mem}{\goto{L}}{\cont}
    \longrightarrow
    \sstatefun{f}{\PCT}{\mem}{\slabel{L}{\stmt}}{\pop(\cont)}\)}}

% step_internal_function
\newcommand{\callstep}
{\judgmentbr{\(\mathit{def}(f) = \mathit{internal}(xs, \stmt)\)}
  {\(\lenv' = \lenv \llbracket x \mapsto v@\vt' \mid
    (x,v@\vt) \leftarrow \mathit{zip}(xs,args), \vt' \leftarrow \argt \rrbracket\)}
  {\(\cstate{\PCT}{\mem}{f}{args}{\cont} \longrightarrow
    \sstate{\PCT}{\mem}{\genv}{\lenv'}{\stmt}{\cont}\)}}

% step_external_function

% specific external function
\newcommand{\mallocstep}
{\judgmenttwobrlong
    {\(\trule{\malloctres}{\malloct}\)}
    {\(\mem',p \leftarrow \mathit{heap\_alloc} ~ \mathit{size} ~ \mem\)}
    {\(\mem'' = \mem'\left[p + i \mapsto (\vundef,\vt,\lt) \mid 0 \leq i < s\right]\)}
    {\(\defestate{\ctx{\mathit{malloc(\mathit{size}@t)}}}
      \longrightarrow
      \estate{\PCT'}{\mem''}
             {\ctx{\val{p}{\pt}}}{\cont}\)}}

% step_returnstate
\newcommand{\returnstep}
{\judgmenttwo{\(\cont = \mathit{Kcall} ~ \lenv' ~ \mathit{ctx} ~ \cont'\)}
  {\(\PCT'',\vt' \leftarrow \rett\)}
  {\(\rstate{\PCT}{\mem}{\val{v}{\vt}}{\cont} \longrightarrow
    \estate{\PCT'}{\mem}{\mathit{ctx}[\val{v}{\vt'}]}{\cont'}\)}}

% step_lred + red_var_local
\newcommand{\varstep}
{\judgmenttwo{\(\lenv[id] = (l,\_,\pt,ty)\)}
  {\(\trule{\vartres}{\vart}\)}
  {\(\defestate{\ctx{\var{id}}}
    \longrightarrow
    \defestate{\ctx{\loc{l}{\pt}}}\)}}

% step_lred + red_var_global

% step_lred + red_deref
\newcommand{\derefstep}
{\judgment{}
  {\(\defestate{\ctx{\deref{\val{v}{\vt}}}}
    \longrightarrow
    \defestate{\ctx{\loc{\mathit{to\_ptr} ~ v}}}\)}}

% step_lred + red_field_struct of red_field_union
\newcommand{\fieldstructstep}
{\judgment{\(\type = \mathit{TStruct} ~ id \lor \type = \mathit{TUnion} ~ id\}\)}
  {\(\mathit{offset} ~ id ~ fld = \delta\)}
  {\(\defestate{\ctx{\field{\val{p}{\pt}:\type}{fld}}}
    \longrightarrow
    \defestate{\ctx{\loc{p+\delta}}}\)}
}

% step_rred + red_rval_of
\newcommand{\valofstep}
{\judgmenttwo{\(\mem[l]_{|ty|} = v@\vt@\overline{\lt}\)}
            {\(\trule{\loadtres}{\loadt}\)}
            {\(\estate{\PCT}{\mem}
              {\ctx{\valof{\loc{l}{\pt}}}}{\cont}
              \longrightarrow
              \estate{\PCT}{\mem}
                     {\ctx{\val{v}{\vt'}}}{\cont}\)}}

% step_rred + red_addrof
\newcommand{\addrofstep}
{\judgment{}
  {\(\defestate{\ctx{\addr{\loc{p}{\pt}}}}
    \longrightarrow
  \defestate{\ctx{\val{p}{\pt}}}\)}
}
  
% step_rred + red_unop
\newcommand{\unopstep}
{\judgmenttwo{\(\left\langle \odot \right\rangle v = v'\)}
            {\(\vt' = \unopt{\PCT}{\vt}\)}
            {\(\defestate{\ctx{\unop{\odot}{\val{v}{\vt}}}}
              \longrightarrow
              \defestate{\ctx{\val{v'}{\vt'}}}\)}}

% step_rred + red_binop
\newcommand{\binopstep}
{\judgmenttwo{\(v_1 \left\langle \oplus \right\rangle v_2 = v'\)}
            {\(\vt' = \binopt{\PCT}{\vt_1}{\vt_2}\)}
            {\(\defestate{\ctx{\binop{\oplus}{\val{v_1}{\vt_1}}{\val{v_2}{\vt_2}}}}
              \longrightarrow
              \defestate{\ctx{\val{v'}{\vt'}}}\)}}

% step_rred + red_cast
\newcommand{\iicaststep}
{\judgmentthree{\(\neg \mathit{isptr}(\type_1)\)}
  {\(\neg \mathit{isptr}(\type_2)\)}
  {\(\vt' \leftarrow \iicastt\)}
  {\(\defestate{\cast{\val{v}{\vt}}{\type_1}}
    \longrightarrow
    \defestate{\cast{\val{v}{\vt'}}{\type_2}}\)}}
  
% step_rred + red_ipcast
\newcommand{\ipcaststep}
{\judgmentthree{\(\neg \mathit{isptr}(\type_1)\)}
  {\(\mathit{isptr}(\type_2)\)}
  {\(\vt' \leftarrow \ipcastt\)}
  {\(\defestate{\cast{\val{v}{\vt}}{\type_1}}
    \longrightarrow
    \defestate{\cast{\val{v}{\vt'}}{\type_2}}\)}}

% step_rred + red_picast
\newcommand{\picaststep}
{\judgmentthree{\(\mathit{isptr}(\type_1)\)}
  {\(\neg \mathit{isptr}(\type_2)\)}
  {\(\vt' \leftarrow \picastt\)}
  {\(\defestate{\cast{\val{v}{\vt}}{\type_1}}
    \longrightarrow
    \defestate{\cast{\val{v}{\vt'}}{\type_2}}\)}}

% step_rred + red_ppcast
\newcommand{\ppcaststep}
{\judgmentthree{\(\mathit{isptr}(\type_1)\)}
  {\(\mathit{isptr}(\type_2)\)}
  {\(\vt' \leftarrow \ppcastt\)}
  {\(\defestate{\cast{\val{v}{\vt}}{\type_1}}
    \longrightarrow
    \defestate{\cast{\val{v}{\vt'}}{\type_2}}\)}}

% step_rred + red_seqand_true
\newcommand{\seqandtruestep}
{\judgmenttwo{\(\mathit{boolof}(v) = \mathbf{t}\)}
  {\(\CT', \vt' \leftarrow \exprsplitt{\CT}{\vt}\)}
  {\(\defestate{\ctx{\seqand{\val{v}{\vt}}{\expr}}{\CT}}
  \longrightarrow
  \estate{\PCT'}{\mem}{\ctx{\val{\eparen{\expr}{\mathit{Tbool}}{\vt'}}}{}{\cont}}\)}}

% step_rred + red_seqand_false
\newcommand{\seqandfalsestep}
{\judgmentthree{\(\mathit{boolof}(v) = \mathbf{f}\)}
  {\(\CT', \vt' \leftarrow \exprsplitt(\CT, \vt)\)}
  {\(\defestate{\ctx{\seqand{\val{v}{\vt}}{\expr}}}
    \longrightarrow
    \defestate{\ctx{\val{0}{\vt'}}}\)}}

% step_rred + red_seqor_true
\newcommand{\seqortruestep}
{\judgmentthree{\(\mathit{boolof}(v) = \mathbf{t}\)}
  {\(\CT', \vt' \leftarrow \exprsplitt(\CT, \vt)\)}
  {\(\defestate{\ctx{\seqand{\val{v}{\vt}}{\expr}}}
    \longrightarrow
    \defestate{\ctx{\val{1}{\vt'}}}\)}}

% step_rred + red_seqor_false
\newcommand{\seqorfalsestep}
{\judgmenttwo{\(\mathit{boolof}(v) = \mathbf{f}\)}
  {\(\CT', \vt' \leftarrow \exprsplitt{\CT}{\vt}\)}
  {\(\defestate{\ctx{\seqand{\val{v}{\vt}}{\expr}}{\CT}}
  \longrightarrow
  \estate{\PCT'}{\mem}{\ctx{\val{\eparen{\expr}{\mathit{Tbool}}{\vt'}}}{}{\cont}}\)}}

% step_rred + red_condition
\newcommand{\conditionstep}
{\judgment{\(\expr' =
    \begin{cases}
      \expr_1 & \textnormal{if } \mathit{boolof}(v) = \mathbf{t} \\
      \expr_2 & \textnormal{if } \mathit{boolof}(v) = \mathbf{f} \\
    \end{cases}\)}
  {\(\CT' \leftarrow \exprsplitt\)}
  {\(\defestate{\ctx{\condition{\val{v}{\vt}}{\expr_1}{\expr_2}}{\CT}}
    \longrightarrow
  \defestate{\ctx{\paren{\expr'}{\CT'}}}{\CT}\)}}

% step_rred + red_sizeof

% step_rred + red_alignof

% step_rred + red_assign
\newcommand{\assignstep}
{\judgmenttwobrlong{\(\mem[l]_{|ty|} = v_1@\vt_1@\overline{\lt}\)}
                  {\(\mem' = \mem[l \mapsto v_2@\vt' @\overline{\lt}']\)}
                  {\(\trule{\storetres}{\storet}\)}
                  {\(\defestate
                    {\ctx{\assign{\loc{l}{\pt}}{\val{v_2}{\vt_2}}}}
                    \longrightarrow
                    \estate{\PCT'}{\mem'}
                           {\ctx{\val{v_2}{\vt_2}}}{\cont}\)}}

% step_rred + red_assignop
\newcommand{\assignopstep}
{\judgmenttwobr{\(\mem[l]_{|ty|} = v_1@\vt @\overline{\lt}\)}
  {\(\oplus \in \{+,-,*,/,\%,<<,>>,\&,^\wedge,|\}\)}
  {\(\trule{\loadtres}{\loadt}\)}
  {\(\expr = \assign{\loc{l}{\pt}}
    {\binop{\oplus}
      {\val{v_1}{\vt'}}
      {\val{v_2}{\vt_2}}}\)}
  {\(\defestate
    {\ctx{\assignop{\oplus}{\loc{l}{\pt}}
        {\val{v_2}{\vt_2}}}}
    \longrightarrow
    \defestate
        {\ctx{\expr}}\)}}

% step_rred + red_postincr
\newcommand{\postincstep}
{\judgmentthreebrtwo{\(\mem[l] = v@\vt @\overline{\lt}\)}
  {\(\oplus \in \{+,-\}\)}
  {\(\trule{\loadtres}{\loadt}\)}
  {\(\trule{\consttres}{\constt}\)}
  {\(\expr = \comma{\assign{\loc{l}{\pt}}{\binop{\oplus}{\val{v}{\vt'}}{1@\constt}}}
    {\val{v}{\vt'}} \)}
  {\(\defestate
    {\ctx{\postinc{\oplus}
        {\loc{l}{\pt}}}}
    \longrightarrow
    \defestate
        {\ctx{\expr}}\)}}

% step_rred + red_comma
\newcommand{\commastep}
{\judgment{}
  {\(\defestate{\comma{\val{v}{\vt}}{\expr}}
    \longrightarrow
    \defestate{\expr}\)}}

% step_rred + red_paren
\newcommand{\parenstep}
{\judgmenttwo
  {\(\defestate{\paren{\val{v}{\vt}}{\CT}}\)}
  {\(\vt' \leftarrow \exprjoint\)}
  {\(\defestate{\val{v}{\vt'}}\)}}

% step_rred + red_builtin

% step_callred
\newcommand{\callexprstep}
{\judgment{}
  {\(\estate{\PCT}{\mem}{\ctx{\call{f'}{\overline{v @ \vt}}}}{ty}{\cont}
    \longrightarrow
    \cstate{f'}{\PCT}{\mem}{\lenv}{v @ \vt}{\kcall{f}{\ctx}{\cont}}\)}}

\newcommand{\sequencing}
{
  \dostepa
  \dostepb
  \seqstep
  \seqskipstep
  \seqcontinuestep
  \seqbreakstep
  \retvalstep
  \labelstep
}

\newcommand{\conditionals}
{
  \ifstepa
  \ifstepb
  \switchstep
  \switchvalstep
  \switchskiporbreakstep
  \switchcontinuestep
}

\newcommand{\while}
{
  \whilestep
  \whiletruestep
  \whilefalsestep
  \whileskipcontinuestep
  \whilebreakstep
}

\newcommand{\dowhile}
{
  \dowhilestep
  \dowhileskipcontinuestep
  \dowhilefalsestep
  \dowhiletruestep
  \dowhilebreakstep
}

\newcommand{\forloop}
{
  \forinitstep
  \forstep
  \forfalsestep
  \fortruestep
  \forskiporcontinuestep
  \forbreakstep
  \forskippoststep
}

\newcommand{\loops}
{
  \while
  \dowhile
  \forloop
}
